# Userbot –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Star Gifts

–≠—Ç–æ—Ç userbot –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç **–í–°–ï —á–∞—Ç—ã** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç Star Gifts –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ –≤ Django API.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
userbot/
‚îú‚îÄ‚îÄ __init__.py          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞
‚îú‚îÄ‚îÄ main.py             # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ telegram_client.py  # –†–∞–±–æ—Ç–∞ —Å Telegram API
‚îú‚îÄ‚îÄ message_handler.py  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –í–°–ï–• —Å–æ–æ–±—â–µ–Ω–∏–π (–ª–æ–≥–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
‚îú‚îÄ‚îÄ gift_processor.py   # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
‚îú‚îÄ‚îÄ api_client.py       # –†–∞–±–æ—Ç–∞ —Å Django API
‚îú‚îÄ‚îÄ auth_handler.py     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Telegram
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ Dockerfile         # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ: `message_handler.py`**

Userbot –ª–æ–≥–∏—Ä—É–µ—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≤—Å–µ—Ö —á–∞—Ç–æ–≤:
- üì® **–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º (–¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤)
- üé≠ **–î–µ–π—Å—Ç–≤–∏—è** - —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è (–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –≤—ã—Ö–æ–¥, –ø–æ–¥–∞—Ä–∫–∏ –∏ —Ç.–¥.)
- üñºÔ∏è **–ú–µ–¥–∏–∞** - —Ç–∏–ø –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞
- üéÅ **Star Gifts** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:
```
üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ 'Test Chat' –æ—Ç –ò–≤–∞–Ω (@ivan123)
   üìç –ß–∞—Ç ID: -1001234567890
   üìç –°–æ–æ–±—â–µ–Ω–∏–µ ID: 12345
   üìç –î–∞—Ç–∞: 2024-01-15 10:30:00
   üìù –¢–µ–∫—Å—Ç: –ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö–∞–∫ –¥–µ–ª–∞?
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ 'Gift Chat' –æ—Ç –ú–∞—Ä–∏—è (@maria456)
   üìç –ß–∞—Ç ID: -1009876543210
   üìç –°–æ–æ–±—â–µ–Ω–∏–µ ID: 12346
   üìç –î–∞—Ç–∞: 2024-01-15 10:31:00
   üé≠ –¢–∏–ø: MessageActionStarGiftUnique
üéÅ –ù–ê–ô–î–ï–ù STAR GIFT –≤ —á–∞—Ç–µ 'Gift Chat'!
üë§ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–¥–∞—Ä–∫–∞: –ú–∞—Ä–∏—è (@maria456)
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram API
API_ID=your_telegram_api_id
API_HASH=your_telegram_api_hash

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
PHONE_NUMBER=+1234567890  # –í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
LOGIN_CODE=12345          # –ö–æ–¥ –∏–∑ SMS (–ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

# Django API
API_BASE_URL=http://web:8000
API_TOKEN=your_django_api_token
USER_ID=1
```

## –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. **–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏** –Ω–∞ https://my.telegram.org/apps
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ `.env` —Ñ–∞–π–ª–µ:
   ```env
   API_ID=your_api_id
   API_HASH=your_api_hash
   PHONE_NUMBER=+1234567890  # –í–∞—à –Ω–æ–º–µ—Ä –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   ```

### –®–∞–≥ 2: –ü–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ userbot** –ø–µ—Ä–≤—ã–π —Ä–∞–∑:
   ```bash
   python main.py
   ```
2. **–ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS** –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. **–î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```env
   LOGIN_CODE=12345  # –ö–æ–¥ –∏–∑ SMS
   ```
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ userbot** - –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è

### –®–∞–≥ 3: –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏
- **–°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è** –≤ —Ñ–∞–π–ª–µ `session/userbot.session`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è** –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö
- **–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ** `python main.py`

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–µ–∫ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π
1. **–£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏**: `rm session/userbot.session`
2. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥**: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `LOGIN_CODE`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ userbot**

### –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–û—Ç–∫–ª—é—á–∏—Ç–µ 2FA** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram
- –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–∞—Ä–æ–ª—è –≤ –∫–æ–¥ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
- **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ API_ID –∏ API_HASH**
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞** (+1234567890)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `config.py`:

```python
LOG_LEVEL = 'INFO'  # DEBUG, INFO, WARNING, ERROR
```

- **DEBUG** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **INFO** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **WARNING** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
- **ERROR** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

## –ó–∞–ø—É—Å–∫

```bash
python main.py
```

## Docker

```bash
docker-compose up userbot
```
